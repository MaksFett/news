{% extends 'base.html' %}

{% block body %}
    {% if 'login' in session %}
        <div class="row justify-content-end">
            <div class="col-md-1 mt-2 align-self-center">{{session['login']}}</div>
            <form action="/exit" class="row justify-content-end">
                <button method="POST" type="submit" name="endbutton" class="btn btn-primary mx-sm-3 col-md-1 mt-2" id="endbutton">Выйти</button>
            </form>
        </div>
    {% endif %}
    <div class="mt-5"></div>
    <table class="table" id="table">
        <thead class="thead-light">
            <tr>
                <th scope="col">#</th>
                <th scope="col">Название</th>
                <th scope="col">Кол-во страниц</th>
                <th scope="col">Год выпуска</th>
                <th scope="col">Цена</th>
            </tr>
        </thead>
        <tbody>
            {% for item in items %}
                <tr>
                    <th scope="row">{{ loop.index }}</th>
                    <td>{{ item['name'] }}</td>
                    <td>{{ item['page'] }}</td>
                    <td>{{ item['year'] }}</td>
                    <td>{{ item['price'] }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
    {% if 'login' in session %}
        <h3>&nbsp;Добавление записи</h3>
        <form class="form-inline" method="POST" id="form">
            <div class="form-group mx-sm-3 mb-2 col-md-3" name="namediv">
                <label for="InputName">Название книги</label>
                <input name="name" type="text" class="form-control" id="InputName" placeholder="Введите название книги">
            </div>
            <div class="form-group mx-sm-3 mb-2 col-md-3" name="pagediv">
                <label for="InputPage">Кол-во страниц</label>
                <input name="page" type="number" class="form-control" id="InputPage" placeholder="Введите кол-во страниц">
            </div>
            <div class="form-group mx-sm-3 mb-2 col-md-3" name="yeardiv">
                <label for="InputYear">Год выпуска</label>
                <input name="year" type="number" class="form-control" id="InputYear" placeholder="Введите год выпуска">
            </div>
            <div class="form-group mx-sm-3 mb-2 col-md-3" name="pricediv">
                <label for="InputPrice">Цена</label>
                <input name="price" type="number" class="form-control" id="InputPrice" placeholder="Введите цену">
            </div>
            <div class="col text-danger" id="error">&nbsp;&nbsp;&nbsp;&nbsp;</div>
        </form>
        <button type="button" class="btn btn-primary mx-sm-3 mb-2" id="button">Отправить</button>
    {% else %}
        <div class="row">
            <div class="col-md-1 mb-5 mt-5"></div>
        </div>
        <div class="row">
            <div class="col-md-1 mb-5 mt-5"></div>
        </div>
        <div class="row">
            <div class="col-md-1 mb-5 mt-5"></div>
        </div>
        <div class="row">
            <div class="col-md-1 mb-5 mt-5"></div>
        </div>
    {% endif %}
    <script type="text/javascript" src="{{url_for('static', filename='addbook.js')}}"></script>
{% endblock %}